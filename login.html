<script type="module">
    import {
        browserSessionPersistence,
        getAuth,
        sendSignInLinkToEmail,
        setPersistence,
        signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"
    const auth = getAuth();

/*    const sendEmailLink = async (email) => {
        const actionCodeSettings = {
            url: href,
            handleCodeInApp: false,
        };
        try {
            await sendSignInLinkToEmail(
                auth,
                email,
                actionCodeSettings
            );
            window.localStorage.setItem('emailForSignIn', email);
            console.log("Auth link sent.");
        } catch (error) {
            const errorCode = error.code;
            const errorMessage = error.message;
            console.log(`Error Code: ${errorCode}\nError Msg: ${errorMessage}`);
        }
    }*/

    const userSignIn = async () => {
        try {
            await setPersistence(auth, browserSessionPersistence);
            await signInWithEmailAndPassword(auth, email.value, password.value);
            window.location.replace(getHref());
        } catch (error) {
            const errorCode = error.code;
            const errorMessage = error.message;
            authLoginErrorTxt.innerText = `${errorMessage}`;
            authLoginErrorTxt.style.display = "block";
            authLoginError.style.display = "block";
            console.log(`Error Code: ${errorCode}\nError Msg: ${errorMessage}`);
        }
    }
    authLoginBtn.addEventListener("click", (event) => {
        event.preventDefault();
        userSignIn();
    });
    password.addEventListener("keyup", (e) => {
        if (e.key === "Enter" || e.keyCode === 13) {
            authLoginBtn.click();
        }
    });
    // Object.assign(window, {sendEmailLink});
</script>