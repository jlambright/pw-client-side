<script type="application/javascript">
    const storyId = "STORY_ID_FROM_WEBFLOW_CMS";
    const upVote = () => {
        const currentUser = firebase.auth().currentUser;
        if (currentUser) {
            return getIdToken().then((idToken) => {
                const params = {
                    headers: {
                        'Authorization': `Bearer ${idToken}`,
                        "content-type": "application/json; charset=UTF-8"
                    },
                    method: "POST"
                }
                return fetch(`https://api.purplewallstories.com/vote/${storyId}`, params)
                    .then((response) => {
                        console.log(response.json());
                    })
            }).catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                console.log(`Error Code: ${errorCode} \n Error Msg: ${errorMessage}`);
            });
        } else {
            console.log("No user is logged in.");
        }

    };
    voteBtn.addEventListener("click", (event) => {
        event.preventDefault();
        upVote();
    });
</script>